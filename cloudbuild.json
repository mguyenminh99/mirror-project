{
  "steps":[
    {
      "name": "gcr.io/cloud-builders/docker",
      "args": [
        "build",
        "--build-arg",
        "ADOBE_API_KEY",
        "--build-arg",
        "ADOBE_API_PASS",
        "--build-arg",
        "SEND_GRID_API_ACCOUNT",
        "--build-arg",
        "SEND_GRID_API_KEY",
        "-t",
        "asia-northeast1-docker.pkg.dev/${PROJECT_ID}/x-shopping-st/x-shopping-st:${COMMIT_SHA}",
        "."
      ],
      "secretEnv": [
        "ADOBE_API_KEY",
        "ADOBE_API_PASS",
        "SEND_GRID_API_ACCOUNT",
        "SEND_GRID_API_KEY"
      ]
    },
    {
      "name": "gcr.io/cloud-builders/docker",
      "args": [
        "push",
        "asia-northeast1-docker.pkg.dev/${PROJECT_ID}/x-shopping-st/x-shopping-st:${COMMIT_SHA}"
      ]
    }
  ],
  "availableSecrets": {
    "secretManager": [
      {
        "versionName": "projects/335090651464/secrets/ADOBE_API_KEY/versions/latest",
        "env": "ADOBE_API_KEY"
      },
      {
        "versionName": "projects/335090651464/secrets/ADOBE_API_PASS/versions/latest",
        "env": "ADOBE_API_PASS"
      },
      {
        "versionName": "projects/335090651464/secrets/SEND_GRID_API_ACCOUNT/versions/latest",
        "env": "SEND_GRID_API_ACCOUNT"
      },
      {
        "versionName": "projects/335090651464/secrets/SEND_GRID_API_KEY/versions/latest",
        "env": "SEND_GRID_API_KEY"
      }
    ]
  },
  "options": {
    "logging": "CLOUD_LOGGING_ONLY",
    "pool" : {
      "name" : "projects/${PROJECT_ID}/locations/asia-northeast1/workerPools/private-pool-for-cloud-build"
    }
  }
}
